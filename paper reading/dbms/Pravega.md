## 流存储——Pravega

参考https://www.infoq.cn/article/u8gDitPJ28mY-JL6izQT

**数据流实时存储的解决方案**

大数据处理架构：

- Lambda架构：大数据平台 = 批处理层（使用HDFS提供高吞吐的数据访问） + 流处理层（使用消息队列系统） + 应用服务层，从而整合离线计算和实时计算
- Kappa架构：将批处理层、流处理层简化为一致性的流处理
- Google Dataflow模型：将批处理——有限数据流 视为流处理——无限数据流的特例，旨在消除流和批的界限

目前大数据流处理系统存在以下问题：

> 计算是原生的流计算，而存储却不是原生的流存储

所以流存储的需求包括：

- 将数据视为连续和无限
- 能够应对延迟与乱序到达的情况
- 能够通过自动弹性伸缩数据采集、存储和处理能力
- 有检查点确保每个上层应用能保存并恢复原来的使用状态

和其他存储类型的对比：

- 块存储：结构化数据、关系型数据库
- 文件存储：非结构化数据、NoSQL数据库、文件共享、发布与订阅
- 对象存储：非结构化数据、REST数据、语义上无线扩展、多站点部署
- 流存储：append-only、低时延、规模无限、尾部读写、检查点

Pravega基本概念：

- **Events**: 客户端以**Event**的形式来读写数据，每一个**Event**都有一个路由键(Routing Key)，用于给同一类事件进行分组（比如可以是 传感器的机器ID、或者数据采集时间）
- **Stream**: 由***segment***（本质是append-only的字节序列，内部包含一个个的**Event**）组成，可具备 支持事务以及可扩展等特性，作为数据层(Data plane)；，而**Stream**就是在segments的基础上引入了一个控制层(Control plane, 其中controller需要实现Stream的生命周期管理、事务管理)，将不同的segments根据应用需求组成数据流
- **Scope**: 可理解为**Stream**的命名空间，即在同一个Scope内的流，其名称是唯一的；可用作租户管理
- **Writer**, **Reader**, **Reader Group**: 支持同一个reader group下的读者并行从一个数据流中读取数据





