## Above the Clouds: A Berkeley View of Cloud Computing

2009

1. 什么是云计算？

   云计算指：通过网络，将应用程序 以及相应的数据中心中的硬件与系统 作为服务提供。

   其中，**把应用程序本身作为服务 是称为SaaS，而数据中心的软硬件称为 云 Cloud**。

2. 为什么云计算在近年腾飞，而以前的尝试却失败了？

   从硬件的角度看，云计算在以下三方面有创新之处：

   1. 可按需提供无限计算资源的假象，消除了云计算用户提前计划资源调配的需要
   2. 允许企业从小规模做起，只有在需求增加时才增加硬件资源
   3. 根据需要在短期内（例如按天存储）为计算资源的付费，并根据需要对它们进行释放

   过去在效用计算（utility computing，服务提供商提供客户需要的计算资源和基础设施管理，并根据应用所占用的资源情况进行计费，而不是仅仅按照速率进行收费）上的努力失败了，作者认为 是因为 云计算这三个关键特征中的一个或两个缺失了。

3. 成为云计算提供商需要什么条件？为什么一家公司会考虑成为云计算提供商？

   以下原因可能让一家公司会考虑成为云计算提供商：

   - **更高利润**：大型数据中心 花在硬件、网络带宽、电力上的消费 只有中型数据中心的1/5到1/7；且软件开发和部署的固定成本 可以由在更多的机器上运行而分摊。因此一家足够大的公司可以利用这些规模经济，提供远低于中型公司成本的服务，同时还能获得可观的利润
   - **利用现有投入**：在现有基础设施之上来构建云计算服务，以较低的成本增量提供新的收入流，有助于分摊数据中心的大量投入
   - **特许经营权**franchise：比如Microsoft Azure为将其企业应用程序的现有客户 迁移到云环境提供了更方便的路径
   - **向现任者发起挑战**
   - **利用客户关系**：像IBM Global Services 这样的IT组织有广泛的客户关系，那么提供品牌化的云计算产品可以为这些客户提供一条没有担忧的迁移路径，从而保护双方的投资
   - **自己成为平台**：比如Facebook使用插件化的App这一举措非常适合云计算（其一个基础设施提供商就是[Joyent](https://www.joyent.com/)）

4. 云计算带来了哪些新机遇？

5. 如何当前的云计算产品进行分类？特定产品的类别不同，其技术和业务挑战有是否有相应不同？

6. 云计算带来了哪些新的经济模式？服务运营商如何决定 是转移到云计算 还是 留在私有数据中心？

   云计算下的经济模式特点：

   - 云计算支持的细粒度经济模型使**决策更具流动性**，特别是云提供的**弹性有助于转移风险**
   - 尽管硬件资源成本继续下降，但它们的下降速度是裱花的；例如，计算和存储成本的下降速度要快于WAN。云计算可以记录这些变化，并其传递给客户，比他们建设自己的数据中心更高效，从而使支出与实际资源使用更接近
   - 在决定是否将现有服务移动到云上时，还必须检查预期的平均资源利用率和峰值资源利用率，特别是当应用程序可能具有高度可变的资源需求峰值时；对购买设备的实际利用率的实际限制；以及所需的各种运营成本根据所考虑的云环境的类型而有所不同

   是否迁移到云的成本比较：

   - 按单独资源付费
   - 电力、冷却和物理设备成本
   - 运维成本

7. 云计算的十大障碍是什么？克服这些障碍相应的机遇有哪些？

   1. **服务可用性：**

      作者认为，实现极高可用性的唯一可行解决方案是多个云计算供应商。高可用性计算社区长期以来一直奉行“没有单点故障”原则，然而，由单公司负责云计算服务实际上也是一种单故障点。即使公司在不同的地理区域拥有多个数据中心，使用不同的网络供应商，它也可能拥有通用的软件基础设施和会计系统，甚至公司可能倒闭。如果没有针对这种情况的业务连续性战略，大客户将不愿意迁移到云计算。

      另一个可用性的障碍是 DDoS攻击。云计算将攻击目标从SaaS供应商转移到效用计算供应商，后者通过弹性可以更容易地吸收攻击，而且也可能已经将DDoS保护作为核心能力。

   2. **数据的锁定**(data lock-in)：

      客户无法轻松地从一个地方提取数据 放到另一个地方。由于担心从云中提取数据的难度很大，一些组织无法采用云计算。

      这种lock-in可能对云计算供应商有利，但云计算用户很容易受到价格上涨、可靠性、甚至供应商倒闭的影响。

      > 可参考[供应商锁定](https://zhuanlan.zhihu.com/p/350736696) vender lock-in:
      >
      > 是指切换到其他供应商的成本非常高、以至于客户不得不继续使用原始供应商的情况。由于财政压力、人手不足，或需要避免业务运营中断，客户可能在产品或服务质量不佳时被锁定。

      一种解决方案是 将API标准化，从而SaaS开发人员可以跨多个云计算提供商部署服务和数据。但是这样做可能会导致 云产品的定价相互**竞次**(race-to-the-bottom)，也就是比谁更能达到底线，肯定会损害云计算供应商的利益。对此，作者提出了两个看法：

      - 云服务的质量和价格都是同等重要的，所以顾客不一定会选择价格最低的服务。比如当今一些互联网服务供应商的价格比其他供应商高出10倍，因为他们更可靠，并提供额外的服务来提高可用性。
      - 标准化的API还支持一种新的模型——相同的软件基础设施可以在私有云和公共云中使用。从而支持 **激增计算**(surge computing)，即使用公共云来处理 由于临时突增的工作负载而无法在私有云轻松完成的任务

      > 最近看到[这篇博文](https://www.intercom.com/blog/ten-technical-strategies-to-avoid-when-scaling-your-startup-and-five-to-embrace)则指出，目前对于大部分企业来说 需要避免多云架构，因为这属于一种过早优化（ premature optimization），除非是像Apple或Netflix的企业、或者已经占据了互联网大量流量。更合理的应该是选择一个好的云供应商。
      >
      > We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil. Yet we should not pass up our opportunities in that critical 3%.

   3. **数据保密性和可审核性**(Confidentiality and Auditability)：

      作者相信，要使云计算环境像绝大多数内部IT环境一样安全，没有任何根本性的障碍，许多问题可以通过已知的技术（如加密存储、虚拟局域网和网络中间件设备 如防火墙、数据包过滤器）。例如，在将数据放入云中之前对其进行加密，可能比在本地数据中心中对进行加密更安全。

   4. **数据传输瓶颈：**

      如今的应用程序继续变得更加数据密集，数据传输成本成为一个重要问题。云用户和云供应商必须如果想把成本降到最低，就要考虑系统各个层次的布局和流量的影响。

      一种解决方案就是 直接运输磁盘。Jim Gray指出传输大量数据最便宜的方法是通过隔夜快递 发送磁盘甚至整个计算机。尽管磁盘或计算机的制造商无法保证这种运输方式的可靠性，但Gray在大约400次尝试中只经历了一次失败（甚至可以通过以类似RAID的方式传送带有冗余数据的磁盘来缓解这一问题）。

      其次，由于像亚马逊、谷歌和微软这样的公司发送的数据可能比接收的数据多得多，因此入口带宽的成本可能要低得多，所以可以考虑**异地归档和备份**服务。因此，例如，如果每周的完整备份是通过运送物理磁盘来移动的，而压缩后的每日增量备份通过网络发送，那么云计算可能可以提供价格合理的异地备份服务。并且，一旦归档数据进入云中，就能提供更多的新服务。比如为归档数据创建可搜索的索引，或对所有存档照片执行图像识别 从而进行分组。

      还有更激进的思路是 尝试更快地降低广域网带宽的成本。据估计，广域网带宽成本的三分之二是高端路由器的成本，而只有三分之一是光纤成本，所以有研究在寻找高端分布式路由器的低成本替代品。

   5. **性能的不可预测性**：

      从经验上来看，在云计算中，多个虚拟机可以很好地共享CPU和内存，但IO方面的问题很大。

      一种可能是使用闪存来减少IO的相互干扰。闪存在断电时可以保存信息，且不像磁盘需要转动来访问，速度更快。与磁盘相比，闪存每秒可以支持更多的I/O，因此随机I/O workload的多个虚拟机，可以在同一台物理机上更好地共存。

   6. **可扩展的存储：**

      如何创建一个存储系统与云的优势结合起来。即满足在资源管理方面对**可伸缩性**、**数据持久性**和**高可用性**的期望

   7. **大型分布式系统存在的Bug：**

      大型分布式系统中出现的bug，很多都无法在小规模的环境下复现，所以不得不在大规模生产环境中进行debug。

      相应的方法比如：依靠云环境的虚拟化，来获取有价值的错误信息。

   8. **快速扩缩容**：

      存储、网络是现用现付(pay as you go)的，都是按使用的大小计算，如何能在不违反SLA的情况下 快速扩缩容来节省成本？

   9. **声誉共同体**(Reputation Fate Sharing)：一个客户的不良行为会影响整个云的声誉。例如，垃圾邮件防范服务将EC2 IP地址列入黑名单，可能会对其他应用造成影响。相对应的，另一个问题是法律责任的转移问题，也就是云计算提供商希望法律责任由客户承担而不是转移给他们（即发送垃圾邮件的公司应该承担责任，而不是Amazon本身）。

   10. **软件许可：**

       许多云供应商基于开源软件开发的原因，部分就是由于商业软件不适合效用计算的场景。

       所以未来要么开源软件继续越来越受欢迎，要么商业软件公司就要对云环境下的许可作出相应调整。

8. 未来的应用软件、基础设施和硬件的设计应该做出哪些改变，以适应云计算的需求和机遇？

   - 软件：出售给企业客户 和 给云计算有不同的定价。
   - 基础设施：需要意识到 不是在裸金属上运行，而是在虚拟机中。
   - 硬件：
     - 需要面向多个机架的规模设计
     - 可以将内存、存储器和网络的空闲部分置于低功耗模式来做到能耗均衡
     - 提高数据中心交换机 和 WAN路由器的带宽，且降低成本